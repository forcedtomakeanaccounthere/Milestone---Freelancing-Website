<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sidebar Dashboard</title>
    <link rel="stylesheet" href="/css/EmployerD/sidebar.css" />
    <link rel="stylesheet" href="/css/EmployerD/see_more_detail.css" />
  </head>
  <body>
    <div class="dashboard-wrapper">
      <div class="sidebar-container">
        <div class="content">
          <div class="left-panel">
            <div class="profile-img-container">
              <svg width="130px" height="130px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 6C10.3431 6 9 7.34315 9 9C9 10.6569 10.3431 12 12 12C13.6569 12 15 10.6569 15 9C15 7.34315 13.6569 6 12 6ZM17.8946 17.4473L17.0002 17C17.8946 17.4473 17.8939 17.4487 17.8939 17.4487L17.8932 17.4502L17.8916 17.4532L17.8882 17.46L17.88 17.4756C17.8739 17.4871 17.8666 17.5004 17.858 17.5155C17.8409 17.5458 17.8186 17.5832 17.7906 17.6267C17.7346 17.7138 17.6558 17.8254 17.5497 17.9527C17.3369 18.208 17.0163 18.5245 16.5549 18.8321C15.6228 19.4534 14.1751 20 12.0001 20C8.31494 20 6.76549 18.4304 6.26653 17.7115C5.96463 17.2765 5.99806 16.7683 6.18066 16.4031C6.91705 14.9303 8.42234 14 10.069 14H13.7642C15.5134 14 17.1124 14.9883 17.8947 16.5528C18.0354 16.8343 18.0354 17.1657 17.8946 17.4473Z" fill="#152C70"/>
              </svg>
            </div>
            <div class="profile-name">Hey User!</div>
            <nav class="dashboard-nav">
              <ul>
                <li class="nav-item">
                  <a href="/" class="nav-link">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24px" height="24px">
                      <path d="M 12 2.0996094 L 1 12 L 4 12 L 4 21 L 10 21 L 10 14 L 14 14 L 14 21 L 20 21 L 20 12 L 23 12 L 12 2.0996094 z"/>
                    </svg>
                    <span>Home</span>
                  </a>
                </li>
                <li class="nav-item"><a href="/employerD/profile" class="nav-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg><span>Profile</span></a></li>
                <li class="nav-item active"><a href="/employerD/job-listings" class="nav-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path></svg><span>Job Listings</span></a></li>
                <li class="nav-item"><a href="/employerD/current-jobs" class="nav-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 12h-4l-3 9L9 3l-3 9H2"></path></svg><span>Current Active Jobs</span></a></li>
                <li class="nav-item"><a href="/employerD/previously-worked" class="nav-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg><span>Previously Worked</span></a></li>
                <li class="nav-item"><a href="/employerD/transaction-history" class="nav-link"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="2" y="6" width="20" height="12" stroke="black" stroke-width="2"/><line x1="2" y1="10" x2="22" y2="10" stroke="black" stroke-width="2"/><rect x="4" y="14" width="4" height="2" fill="black"/></svg><span>Transaction History</span></a></li>
                <li class="nav-item"><a href="/employerD/subscription" class="nav-link"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 16h16l-1 4H5l-1-4z" stroke="black" stroke-width="2"/><path d="M4 10l4 4h8l4-4-4-4-4 4-4-4-4 4z" stroke="black" stroke-width="2" stroke-linejoin="round"/></svg><span>Subscription</span></a></li>
                
              </ul>
            </nav>
            <button class="logout-btn" onclick="window.location.href='/logout'">Logout</button>
          </div>
        </div>
      </div>
      <div class="main-content">
        <div class="container">
          <header>
            <div class="logo">Job Details</div>
            <div></div>
          </header>
          <div class="job-header">
            <div class="job-title-section">
              <div class="job-title-info">
                <div class="deadline">Application Deadline: <%= job.deadline %></div>
                <h1 class="job-title"><%= job.title %></h1>
                <div class="company-name"><%= job.company %></div>
                <div class="job-meta">
                  <div class="meta-item">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor" class="icon">
                      <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5z"/>
                    </svg>
                    <span><%= job.location %> (<%= job.remote %>)</span>
                  </div>
                  <div class="meta-item">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor" class="icon">
                      <path d="M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z"/>
                    </svg>
                    <span><%= job.type %></span>
                  </div>
                  <div class="meta-item">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor" class="icon">
                      <path d="M11 2h2v5h8v3h-8v5h5v3h-5v4h-2v-4H6v-3h5v-5H3V7h8V2z"/>
                    </svg>
                    <span><%= job.weeklySalary %></span>
                  </div>
                  <div class="meta-item">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor" class="icon">
                      <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2zm0 16H5V8h14v11z"/>
                    </svg>
                    <span>Posted on <%= job.postedDate %></span>
                  </div>
                </div>
              </div>
              <div class="job-img-container">
                <img src="/assets/company_logo.jpg" alt="xyz company" class="job-img" />
              </div>
            </div>
            <div class="job-actions">
              <button class="edit-button" id="editJobBtn">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" class="icon">
                  <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                </svg>
                Edit Job
              </button>
              <button class="delete-button">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" class="icon">
                  <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                </svg>
                Delete Job
              </button>
            </div>
          </div>
          <div class="job-description">
            <div class="section-title">
              Job Description
              <div class="section-buttons">
                <button class="edit-button" id="editDescriptionBtn">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" class="icon">
                    <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                  </svg>
                  Edit
                </button>
              </div>
            </div>
            <div class="description-text">
              <% job.description.split('\n\n').forEach(para => { %>
                <p><%= para %></p><br />
              <% }) %>
              <p><strong>Responsibilities:</strong></p>
              <ul style="margin-left: 20px; margin-top: 10px; margin-bottom: 10px">
                <% job.responsibilities.forEach(resp => { %>
                  <li><%= resp %></li>
                <% }) %>
              </ul>
              <br />
              <p><strong>Requirements:</strong></p>
              <ul style="margin-left: 20px; margin-top: 10px">
                <% job.requirements.forEach(req => { %>
                  <li><%= req %></li>
                <% }) %>
              </ul>
              <div class="skills-required">
                <div class="skills-title">Technical Skills:</div>
                <div class="skills-tags">
                  <% job.skills.forEach(skill => { %>
                    <span class="skill-tag"><%= skill %></span>
                  <% }) %>
                </div>
              </div>
            </div>
          </div>
          <div class="milestones">
            <div class="section-title">
              Project Milestones
              <div class="section-buttons">
                <button class="add-button" id="addMilestoneBtn">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" class="icon">
                    <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                  </svg>
                  Add Milestone
                </button>
              </div>
            </div>
            <table class="milestones-table">
              <thead>
                <tr>
                  <th style="width: 50%">Deliverable</th>
                  <th style="width: 20%">Deadline</th>
                  <th style="width: 20%">Payment</th>
                  <th style="width: 10%">Actions</th>
                </tr>
              </thead>
              <tbody id="milestones-tbody">
                <% job.milestones.forEach(milestone => { %>
                  <tr>
                    <td><%= milestone.deliverable %></td>
                    <td><%= milestone.deadline %></td>
                    <td class="payment-column"><%= milestone.payment %></td>
                    <td>
                      <div class="milestone-actions">
                        <button class="milestone-button edit-milestone">
                          <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" class="icon">
                            <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                          </svg>
                        </button>
                        <button class="milestone-button delete-milestone">
                          <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" class="icon">
                            <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                          </svg>
                        </button>
                      </div>
                    </td>
                  </tr>
                <% }) %>
              </tbody>
            </table>
          </div>
          <div class="applicants">
            <div class="section-title">Applicants (<%= job.applicants %>)</div>
            <div class="applicants-list">
              <% job.applicantList.forEach(applicant => { %>
                <div class="applicant-item">
                  <div class="applicant-number"><%= applicant.id %></div>
                  <img src="<%= applicant.image %>" alt="Applicant" class="applicant-img" />
                  <div class="applicant-info">
                    <div class="applicant-name"><%= applicant.name %></div>
                    <div class="applicant-title"><%= applicant.title %></div>
                    <div class="applicant-date">Applied on <%= applicant.applied %></div>
                  </div>
                  <a href="/employerD/job-listings/see_more/job/view_profile"><button class="view-profile-btn">View Profile</button></a>
                </div>
              <% }) %>
            </div>
          </div>
        </div>
        <div class="modal-overlay" id="editJobModal">
          <div class="modal">
            <div class="modal-header">
              <div class="modal-title">Edit Job Listing</div>
              <button class="close-modal" id="closeEditJobModal">×</button>
            </div>
            <div class="modal-body">
              <div class="form-group">
                <label class="form-label">Job Title</label>
                <input type="text" class="form-input" id="jobTitleInput" value="<%= job.title %>" />
              </div>
              <div class="form-group">
                <label class="form-label">Company Name</label>
                <input type="text" class="form-input" id="companyNameInput" value="<%= job.company %>" />
              </div>
              <div class="form-group">
                <label class="form-label">Location</label>
                <input type="text" class="form-input" id="locationInput" value="<%= job.location %> (<%= job.remote %>)" />
              </div>
              <div class="form-group">
                <label class="form-label">Job Type</label>
                <select class="form-input" id="jobTypeInput">
                  <option value="Full-time" <%= job.type === 'Full-time' ? 'selected' : '' %>>Full-time</option>
                  <option value="Part-time" <%= job.type === 'Part-time' ? 'selected' : '' %>>Part-time</option>
                  <option value="Contract" <%= job.type === 'Contract' ? 'selected' : '' %>>Contract</option>
                  <option value="Freelance" <%= job.type === 'Freelance' ? 'selected' : '' %>>Freelance</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">Salary Range</label>
                <input type="text" class="form-input" id="salaryInput" value="<%= job.weeklySalary %>" />
              </div>
              <div class="form-group">
                <label class="form-label">Application Deadline</label>
                <input type="date" class="form-input" id="deadlineInput" value="<%= job.deadline.split(' ').join('-') %>" />
              </div>
              <div class="warning-text">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" class="icon">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
                </svg>
                Warning: Editing this job listing will result in removal and re-listing of the job. All current applications will be preserved.
              </div>
            </div>
            <div class="modal-footer">
              <button class="cancel-btn" id="cancelEditJob">Cancel</button>
              <button class="save-btn" id="saveEditJob">Save Changes</button>
            </div>
          </div>
        </div>
        <div class="modal-overlay" id="editDescriptionModal">
          <div class="modal">
            <div class="modal-header">
              <div class="modal-title">Edit Job Description</div>
              <button class="close-modal" id="closeEditDescriptionModal">×</button>
            </div>
            <div class="modal-body">
              <div class="form-group">
                <label class="form-label">Job Description</label>
                <textarea class="form-textarea" id="descriptionTextarea"><%= job.description %>
Responsibilities:
<% job.responsibilities.forEach(resp => { %>- <%= resp %>
<% }) %>
Requirements:
<% job.requirements.forEach(req => { %>- <%= req %>
<% }) %></textarea>
              </div>
              <div class="form-group">
                <label class="form-label">Skills Required (comma-separated)</label>
                <input type="text" class="form-input" id="skillsInput" value="<%= job.skills.join(', ') %>" />
              </div>
            </div>
            <div class="modal-footer">
              <button class="cancel-btn" id="cancelEditDescription">Cancel</button>
              <button class="save-btn" id="saveEditDescription">Save Changes</button>
            </div>
          </div>
        </div>
        <div class="modal-overlay" id="addMilestoneModal">
          <div class="modal">
            <div class="modal-header">
              <div class="modal-title">Add New Milestone</div>
              <button class="close-modal" id="closeAddMilestoneModal">×</button>
            </div>
            <div class="modal-body">
              <div class="form-group">
                <label class="form-label">Deliverable Description</label>
                <input type="text" class="form-input" id="deliverableInput" placeholder="E.g., Complete feature X" />
              </div>
              <div class="form-group">
                <label class="form-label">Deadline</label>
                <input type="text" class="form-input" id="milestoneDeadlineInput" placeholder="E.g., Week 2" />
              </div>
              <div class="form-group">
                <label class="form-label">Payment Amount</label>
                <input type="text" class="form-input" id="paymentInput" placeholder="E.g., ₹24,900 (20%)" />
              </div>
            </div>
            <div class="modal-footer">
              <button class="cancel-btn" id="cancelAddMilestone">Cancel</button>
              <button class="save-btn" id="saveAddMilestone">Add Milestone</button>
            </div>
          </div>
        </div>
        <div class="modal-overlay" id="editMilestoneModal">
          <div class="modal">
            <div class="modal-header">
              <div class="modal-title">Edit Milestone</div>
              <button class="close-modal" id="closeEditMilestoneModal">×</button>
            </div>
            <div class="modal-body">
              <div class="form-group">
                <label class="form-label">Deliverable Description</label>
                <input type="text" class="form-input" id="editDeliverableInput" />
              </div>
              <div class="form-group">
                <label class="form-label">Deadline</label>
                <input type="text" class="form-input" id="editMilestoneDeadlineInput" />
              </div>
              <div class="form-group">
                <label class="form-label">Payment Amount</label>
                <input type="text" class="form-input" id="editPaymentInput" />
              </div>
              <input type="hidden" id="editMilestoneIndex" />
            </div>
            <div class="modal-footer">
              <button class="cancel-btn" id="cancelEditMilestone">Cancel</button>
              <button class="save-btn" id="saveEditMilestone">Save Changes</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="/js/EmployerD/see_more_detail.js"></script>
  </body>
</html>